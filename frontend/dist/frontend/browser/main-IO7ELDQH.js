import{a as we,b as Ee,c as De}from"./chunk-4FF3BEQP.js";import{a as z,b as h,c as M,d as Se,e as _e,f as xe,g as Le,h as Ae,i as Me,j as Pe,k as Ie}from"./chunk-CDMAQBYZ.js";import{a as ce,b as be,c as he,d as Ce,e as I,f as S,g as w,h as ve,i as ye,j as _}from"./chunk-G3K7PNBC.js";import{Bb as H,C as q,Cb as U,Db as $,Eb as P,F as J,Gb as ae,Hb as V,Ia as s,Jb as f,Kb as b,Ob as pe,R as K,T as X,Ta as g,Wb as W,X as Y,Xa as oe,aa as ee,ba as l,cb as d,f as Q,fb as re,gb as ne,gc as me,hb as x,ia as N,ib as L,ja as j,jb as i,kb as n,kc as se,lb as m,lc as le,mc as de,nb as B,oc as y,pb as v,qb as c,t as Z,uc as ue,vc as ge,wa as te,wc as fe,xb as u,yb as ie,zb as A}from"./chunk-JNUWSLK2.js";var E=class t extends Ae{constructor(e){super(e,"login");this.http=e}login(e){return this.execute({body:e}).pipe(Z(o=>o),J(o=>{throw o}))}static \u0275fac=function(o){return new(o||t)(ee(ue))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ne={user:{},error:"",logged:!1,isLoading:!1,currentPage:"dashboard"},C=Se({providedIn:"root"},Le(Ne),xe((t,r=l(E))=>({loginUser:Me(Q(X(()=>M(t,{isLoading:!0})),K(e=>r.login(e).pipe(Pe({next:o=>M(t,{logged:!0,isLoading:!1}),error:o=>{M(t,{isLoading:!1,error:o.message}),console.error("Error during login: ",o.message)}}))))),changeCurrentPage:e=>{M(t,{currentPage:e})}})),_e(({isLoading:t})=>({isLoading$:Ie(t)})));var Fe=(t,r)=>({"border-primary":t,"border-transparent":r}),Re=(t,r)=>r.appRoute;function je(t,r){if(t&1){let e=B();i(0,"li",13),v("click",function(){let p=N(e).$implicit,a=c();return j(a.changeCurrentPage(p.name))}),u(1),f(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=c();d("routerLink",e.appRoute)("ngClass",V(5,Fe,o.currentPage===e.name,o.currentPage!=e.name)),s(),A(" ",b(2,3,e.name)," ")}}function Be(t,r){if(t&1){let e=B();i(0,"li",14),v("click",function(){let p=N(e).$implicit,a=c();return j(a.changeCurrentPage(p.name))}),u(1),f(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=c();d("routerLink",e.appRoute)("ngClass",V(5,Fe,o.currentPage===e.name,o.currentPage!=e.name)),s(),A(" ",b(2,3,e.name)," ")}}var k=class t{store=l(C);router=l(S);menuItems=[];currentPage="dashboard";constructor(){let r=this.router.url.split("/")[1];this.menuItems=Object.keys(z).map(e=>{let o=z[e];return this.currentPage=r.includes(e)?e:this.currentPage,o}).filter(e=>e.showInApp)}changeCurrentPage(r){r&&(this.currentPage=r,this.store.changeCurrentPage(r))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-sidebar"]],decls:16,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","d-lg-none"],[1,"container-fluid"],[1,"navbar-brand"],["src","assets/logo.png","alt","Logo","width","40"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarScroll","aria-controls","navbarScroll","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarScroll",1,"collapse","navbar-collapse"],["role","button",1,"navbar-nav","me-auto","my-2","my-lg-0","navbar-nav-scroll",2,"--bs-scroll-height","100px"],[1,"nav-item","py-2",3,"routerLink","ngClass"],[1,"h-100","py-2","d-none","d-lg-block"],[1,"d-flex","justify-content-center","mb-3"],[1,"list-group","list-group-flush","border-0","d-block-sm"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"routerLink","ngClass"],[1,"nav-item","py-2",3,"click","routerLink","ngClass"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"click","routerLink","ngClass"]],template:function(e,o){e&1&&(i(0,"nav",0)(1,"div",1)(2,"span",2),m(3,"img",3),n(),i(4,"button",4),m(5,"span",5),n(),i(6,"div",6)(7,"ul",7),x(8,je,3,8,"li",8,Re),n()()()(),i(10,"div",9)(11,"div",10),m(12,"img",3),n(),i(13,"div",11),x(14,Be,3,8,"li",12,Re),n()()),e&2&&(s(8),L(o.menuItems),s(6),L(o.menuItems))},dependencies:[y,me,de,w,_],encapsulation:2})};var He=t=>[t];function Ue(t,r){if(t&1&&(i(0,"a",8),u(1),f(2,"titlecase"),n(),i(3,"span",9),u(4,">"),n()),t&2){let e=c().$implicit;d("routerLink",ae(4,He,e.route)),s(),A(" ",b(2,2,e.text)," ")}}function $e(t,r){if(t&1&&(i(0,"span"),u(1),n()),t&2){let e=c().$implicit;s(),ie(e.text)}}function Ve(t,r){if(t&1&&oe(0,Ue,5,6)(1,$e,2,1,"span"),t&2){let e=r.$index,o=r.$count,p=c();re(p.pages.length>1&&e!==o-1?0:1)}}var F=class t{router=l(S);pages=[];constructor(){this.router.events.pipe(q(r=>r instanceof Ce)).subscribe(r=>{let e="",o=[{text:"Home",route:"home"}];if(r.url==="/home"){this.pages=o;return}r.url.split("/").filter(p=>p!=="").forEach(p=>{o=[...o,{text:p,route:e+p+"/"}]}),this.pages=o})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-dashboard"]],decls:17,vars:0,consts:[[1,"main-grid","d-block","d-lg-grid"],[1,"header","border-bottom","bg-primary","text-white","d-none","d-lg-flex","justify-content-between","align-items-center","px-5"],[1,"fs-4"],["src","assets/company-profile-image.png","alt","Logo","width","45",1,"logo"],[1,"sidebar","border-end","d-block"],[1,"sidebar","border-end","d-none","d-lg-block"],[1,"content","p-5","position-relative"],[1,"d-none","d-lg-flex","align-items-center","px-5",2,"position","absolute","top","10px","left","0"],[1,"link-offset-2","link-offset-2-hover","link-underline","link-underline-opacity-0","link-underline-opacity-75-hover","me-1",3,"routerLink"],[1,"me-1","text-primary"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),u(4,"ElOgiQ. "),n(),i(5,"span"),u(6,"La logistica semplice"),n()(),m(7,"img",3),n(),i(8,"div",4),m(9,"app-sidebar"),n(),i(10,"div",5),m(11,"app-sidebar"),n(),i(12,"div",6)(13,"div",7),x(14,Ve,2,1,null,null,ne),n(),m(16,"router-outlet"),n()()),e&2&&(s(14),L(o.pages))},dependencies:[y,le,I,k,w,_],encapsulation:2,changeDetection:0})};var O=class t{store=l(C);router=l(S);loginFormControls=[];error=te("");isLoading;constructor(){this.isLoading=this.store.isLoading$,this.loginFormControls=Ee["login".toString()],W(()=>{this.error.set(this.store.error())}),W(()=>{this.store.logged()&&this.router.navigate(["/home"])})}onSubmit(r){this.store.loginUser(r)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-login"]],features:[P([C])],decls:12,vars:14,consts:[[1,"d-flex","d-lg-none","h-100","justify-content-center","align-items-center","p-3","bg-primary","position-relative"],[1,"d-flex","p-3","pt-5","position-absolute","top-0","start-50","translate-middle-x"],["src","assets/logo-white.png","width","100"],[1,"p-5","d-flex","flex-column","rounded","shadow","bg-body"],[3,"formSubmittedOutput","errorChange","controls","error","isLoading","horizontal","light"],[1,"d-none","d-lg-flex","h-100","justify-content-center","align-items-center","bg-primary","position-relative"],[1,"w-50","p-5","d-flex","flex-column","rounded","shadow","bg-body"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1),m(2,"img",2),n(),i(3,"div",3)(4,"app-form",4),f(5,"async"),v("formSubmittedOutput",function(a){return o.onSubmit(a)}),$("errorChange",function(a){return U(o.error,a)||(o.error=a),a}),n()()(),i(6,"div",5)(7,"div",1),m(8,"img",2),n(),i(9,"div",6)(10,"app-form",4),f(11,"async"),v("formSubmittedOutput",function(a){return o.onSubmit(a)}),$("errorChange",function(a){return U(o.error,a)||(o.error=a),a}),n()()()),e&2&&(s(4),d("controls",o.loginFormControls),H("error",o.error),d("isLoading",b(5,10,o.isLoading))("horizontal",!1)("light",!1),s(6),d("controls",o.loginFormControls),H("error",o.error),d("isLoading",b(11,12,o.isLoading))("horizontal",!1)("light",!1))},dependencies:[we,y,se,De,_],encapsulation:2,changeDetection:0})};var Oe=[{path:h("dashboard").appRoute,component:F,children:[{path:"",pathMatch:"full",redirectTo:h("home").appRoute},{path:h("home").appRoute,loadComponent:()=>import("./chunk-JZFIL434.js").then(t=>t.HomeComponent)},{path:h("companies").appRoute,loadComponent:()=>import("./chunk-M3S5CA4W.js").then(t=>t.CompaniesComponent)},{path:h("companies").subAppRoute,loadComponent:()=>import("./chunk-WX6ZQ7AP.js").then(t=>t.CompanyComponent)}]},{path:h("login").appRoute,component:O},{path:"**",loadComponent:()=>import("./chunk-4R6TTIKM.js").then(t=>t.NotFoundComponent)},{path:"**",redirectTo:"/not-found",pathMatch:"full"}];var Te={providers:[pe({eventCoalescing:!0}),ve(Oe,ye()),he(be()),ge(fe())]};var T=class t{title="frontend";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-root"]],features:[P([C])],decls:1,vars:0,template:function(e,o){e&1&&m(0,"router-outlet")},dependencies:[I],encapsulation:2,changeDetection:0})};ce(T,Te).catch(t=>console.error(t));
