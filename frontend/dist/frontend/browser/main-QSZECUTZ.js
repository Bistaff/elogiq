import{a as De,b as Re,c as Ee}from"./chunk-43FBYMQS.js";import{a as U,b as C,c as I,d as ye,e as _e,f as xe,g as Ae,h as Me,i as Ie,j as Le,k as Pe}from"./chunk-PR47VFPV.js";import{a as de,b as be,c as Ce,d as he,e as P,f as S,g as D,h as ve,i as Se,j as y}from"./chunk-PTTOV3AC.js";import{$ as K,Ab as re,B as W,Bb as ne,Cb as ie,Db as L,E as Q,Fb as ae,Gb as H,Ha as p,Ib as g,Jb as b,Nb as pe,Q as Z,S as q,Sa as u,Vb as $,W as J,Wa as Y,aa as s,bb as f,eb as ee,f as z,fb as te,fc as me,gb as _,ha as N,hb as x,ia as j,ib as i,jb as n,jc as se,kb as m,kc as le,lc as ce,mb as B,nc as v,ob as A,pb as c,s as G,tc as ue,uc as fe,va as X,vc as ge,wb as d,xb as oe,yb as M}from"./chunk-FEXQBV3E.js";var R=class t extends Me{constructor(e){super(e,"login");this.http=e}login(e){return this.execute({body:e}).pipe(G(o=>o),Q(o=>{throw o}))}static \u0275fac=function(o){return new(o||t)(K(ue))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ne={user:{},error:"",logged:!1,isLoading:!1,currentPage:"dashboard"},h=ye({providedIn:"root"},Ae(Ne),xe((t,r=s(R))=>({loginUser:Ie(z(q(()=>I(t,{isLoading:!0})),Z(e=>r.login(e).pipe(Le({next:o=>I(t,{logged:!0,isLoading:!1}),error:o=>{I(t,{isLoading:!1,error:o.message}),console.error("Error during login: ",o.message)}}))))),changeCurrentPage:e=>{I(t,{currentPage:e})}})),_e(({isLoading:t})=>({isLoading$:Pe(t)})));var Fe=(t,r)=>({"border-primary":t,"border-transparent":r}),ke=(t,r)=>r.appRoute;function je(t,r){if(t&1){let e=B();i(0,"li",13),A("click",function(){let a=N(e).$implicit,l=c();return j(l.changeCurrentPage(a.name))}),d(1),g(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=c();f("routerLink",e.appRoute)("ngClass",H(5,Fe,o.currentPage===e.name,o.currentPage!=e.name)),p(),M(" ",b(2,3,e.name)," ")}}function Be(t,r){if(t&1){let e=B();i(0,"li",14),A("click",function(){let a=N(e).$implicit,l=c();return j(l.changeCurrentPage(a.name))}),d(1),g(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=c();f("routerLink",e.appRoute)("ngClass",H(5,Fe,o.currentPage===e.name,o.currentPage!=e.name)),p(),M(" ",b(2,3,e.name)," ")}}var w=class t{store=s(h);router=s(S);menuItems=[];currentPage="dashboard";constructor(){let r=this.router.url.split("/")[1];this.menuItems=Object.keys(U).map(e=>{let o=U[e];return this.currentPage=r.includes(e)?e:this.currentPage,o}).filter(e=>e.showInApp)}changeCurrentPage(r){r&&(this.currentPage=r,this.store.changeCurrentPage(r))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-sidebar"]],decls:16,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","d-lg-none"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","assets/logo.png","alt","Logo","width","40"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarScroll","aria-controls","navbarScroll","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarScroll",1,"collapse","navbar-collapse"],["role","button",1,"navbar-nav","me-auto","my-2","my-lg-0","navbar-nav-scroll",2,"--bs-scroll-height","100px"],[1,"nav-item","py-2",3,"routerLink","ngClass"],[1,"h-100","py-2","d-none","d-lg-block"],[1,"d-flex","justify-content-center","mb-3"],[1,"list-group","list-group-flush","border-0","d-block-sm"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"routerLink","ngClass"],[1,"nav-item","py-2",3,"click","routerLink","ngClass"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"click","routerLink","ngClass"]],template:function(e,o){e&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),m(3,"img",3),n(),i(4,"button",4),m(5,"span",5),n(),i(6,"div",6)(7,"ul",7),_(8,je,3,8,"li",8,ke),n()()()(),i(10,"div",9)(11,"div",10),m(12,"img",3),n(),i(13,"div",11),_(14,Be,3,8,"li",12,ke),n()()),e&2&&(p(8),x(o.menuItems),p(6),x(o.menuItems))},dependencies:[v,me,ce,D,y],encapsulation:2})};var He=t=>[t];function $e(t,r){if(t&1&&(i(0,"a",8),d(1),g(2,"titlecase"),n(),i(3,"span",9),d(4,">"),n()),t&2){let e=c().$implicit;f("routerLink",ae(4,He,e.route)),p(),M(" ",b(2,2,e.text)," ")}}function Ue(t,r){if(t&1&&(i(0,"span"),d(1),n()),t&2){let e=c().$implicit;p(),oe(e.text)}}function Ve(t,r){if(t&1&&Y(0,$e,5,6)(1,Ue,2,1,"span"),t&2){let e=r.$index,o=r.$count,a=c();ee(a.pages.length>1&&e!==o-1?0:1)}}var F=class t{router=s(S);pages=[];constructor(){this.router.events.pipe(W(r=>r instanceof he)).subscribe(r=>{let e="",o=[{text:"Home",route:"home"}];if(r.url==="/home"){this.pages=o;return}r.url.split("/").filter(a=>a!=="").forEach(a=>{o=[...o,{text:a,route:e+a+"/"}]}),this.pages=o})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-dashboard"]],decls:17,vars:0,consts:[[1,"main-grid","d-block","d-lg-grid"],[1,"header","border-bottom","bg-primary","text-white","d-none","d-lg-flex","justify-content-between","align-items-center","px-5"],[1,"fs-4"],["src","assets/company-profile-image.png","alt","Logo","width","45",1,"logo"],[1,"sidebar","border-end","d-block"],[1,"sidebar","border-end","d-none","d-lg-block"],[1,"content","p-5","position-relative"],[1,"d-none","d-lg-flex","align-items-center","px-5",2,"position","absolute","top","10px","left","0"],[1,"link-offset-2","link-offset-2-hover","link-underline","link-underline-opacity-0","link-underline-opacity-75-hover","me-1",3,"routerLink"],[1,"me-1","text-primary"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),d(4,"EOGIQ. "),n(),i(5,"span"),d(6,"La logistica semplice"),n()(),m(7,"img",3),n(),i(8,"div",4),m(9,"app-sidebar"),n(),i(10,"div",5),m(11,"app-sidebar"),n(),i(12,"div",6)(13,"div",7),_(14,Ve,2,1,null,null,te),n(),m(16,"router-outlet"),n()()),e&2&&(p(14),x(o.pages))},dependencies:[v,le,P,w,D,y],encapsulation:2,changeDetection:0})};var O=class t{store=s(h);router=s(S);loginFormControls=[];error=X("");isLoading;constructor(){this.isLoading=this.store.isLoading$,this.loginFormControls=Re["login".toString()],$(()=>{this.error.set(this.store.error())}),$(()=>{this.store.logged()&&this.router.navigate(["/home"])})}onSubmit(r){this.store.loginUser(r)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-login"]],features:[L([h])],decls:4,vars:6,consts:[[1,"d-flex","h-100","justify-content-center","align-items-center"],[1,"w-50","p-5","d-flex","flex-column","bg-primary"],[3,"formSubmittedOutput","errorChange","controls","error","isLoading","horizontal"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"app-form",2),g(3,"async"),A("formSubmittedOutput",function(l){return o.onSubmit(l)}),ie("errorChange",function(l){return ne(o.error,l)||(o.error=l),l}),n()()()),e&2&&(p(2),f("controls",o.loginFormControls),re("error",o.error),f("isLoading",b(3,4,o.isLoading))("horizontal",!1))},dependencies:[De,v,se,Ee,y],encapsulation:2,changeDetection:0})};var Oe=[{path:C("dashboard").appRoute,component:F,children:[{path:"",pathMatch:"full",redirectTo:C("home").appRoute},{path:C("home").appRoute,loadComponent:()=>import("./chunk-FSDSGX3E.js").then(t=>t.HomeComponent)},{path:C("companies").appRoute,loadComponent:()=>import("./chunk-7GAIPJBO.js").then(t=>t.CompaniesComponent)},{path:C("companies").subAppRoute,loadComponent:()=>import("./chunk-5XYGFF2P.js").then(t=>t.CompanyComponent)}]},{path:C("login").appRoute,component:O},{path:"**",loadComponent:()=>import("./chunk-7X53EETW.js").then(t=>t.NotFoundComponent)},{path:"**",redirectTo:"/not-found",pathMatch:"full"}];var Te={providers:[pe({eventCoalescing:!0}),ve(Oe,Se()),Ce(be()),fe(ge())]};var T=class t{title="frontend";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-root"]],features:[L([h])],decls:1,vars:0,template:function(e,o){e&1&&m(0,"router-outlet")},dependencies:[P],encapsulation:2,changeDetection:0})};de(T,Te).catch(t=>console.error(t));
