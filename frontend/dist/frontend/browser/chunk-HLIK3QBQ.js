import{F as I,L,T as G,Tb as l,Ub as M,Vb as S,X as O,a as s,aa as x,b,ba as f,e as P,ga as g,j as $,l as U,m as H,ma as h,na as p,p as w,q,t as D,tc as W,va as v,wa as E}from"./chunk-HU6A24MR.js";var R=(c=>(c.LOGIN="login",c.LOGOUT="logout",c.DASHBOARD="dashboard",c.HOME="home",c.COMPANIES="aziende",c.COMPANY="azienda",c.PRODUCTS="prodotti",c.PRODUCT="prodotto",c))(R||{});function B(n){let e=l(()=>n());return _(e)?new Proxy(n,{get(t,r){return r in e?(v(t[r])||Object.defineProperty(t,r,{value:M(()=>t()[r]),configurable:!0}),B(t[r])):t[r]}}):n}var Y=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function _(n){if(n===null||typeof n!="object"||J(n))return!1;let e=Object.getPrototypeOf(n);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(Y.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function J(n){return typeof n?.[Symbol.iterator]=="function"}var Q=new WeakMap,u=Symbol("STATE_SOURCE");function ae(n,...e){n[u].update(t=>e.reduce((r,o)=>s(s({},r),typeof o=="function"?o(r):o),t)),ee(n)}function X(n){return n[u]()}function Z(n){return Q.get(n[u])||[]}function ee(n){let e=Z(n);for(let t of e){let r=l(()=>X(n));t(r)}}function le(...n){let e=[...n],t=typeof e[0]=="function"?{}:e.shift(),r=e;return(()=>{class i{constructor(){let d=r.reduce((j,z)=>z(j),te()),{stateSignals:c,props:y,methods:m,hooks:A}=d,k=s(s(s({},c),y),m);this[u]=d[u];for(let j of Reflect.ownKeys(k))this[j]=k[j];let{onInit:T,onDestroy:C}=A;T&&T(),C&&f(p).onDestroy(C)}static \u0275fac=function(c){return new(c||i)};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:t.providedIn||null})}return i})()}function te(){return{[u]:E({}),stateSignals:{},props:{},methods:{},hooks:{}}}function de(n){return e=>{let t=n(s(s(s({[u]:e[u]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(t),b(s({},e),{props:s(s({},e.props),t)})}}function fe(n){return e=>{let t=n(s(s(s({[u]:e[u]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(t),b(s({},e),{methods:s(s({},e.methods),t)})}}function pe(n){return e=>{let t=typeof n=="function"?n():n,r=Reflect.ownKeys(t);e[u].update(i=>s(s({},i),t));let o=r.reduce((i,a)=>{let d=M(()=>e[u]()[a]);return b(s({},i),{[a]:B(d)})},{});return b(s({},e),{stateSignals:s(s({},e.stateSignals),o)})}}function ne(n,e){e?.injector||g(ne);let t=e?.injector??f(h),r=new $,o=n(r).subscribe();t.get(p).onDestroy(()=>o.unsubscribe());let i=(a,d)=>{if(re(a))return r.next(a),{destroy:P};let c=d?.injector??oe()??t;if(v(a)){let m=S(()=>{let A=a();l(()=>r.next(A))},{injector:c});return o.add({unsubscribe:()=>m.destroy()}),m}let y=a.subscribe(m=>r.next(m));return o.add(y),c!==t&&c.get(p).onDestroy(()=>y.unsubscribe()),{destroy:()=>y.unsubscribe()}};return i.destroy=o.unsubscribe.bind(o),i}function re(n){return!v(n)&&!q(n)}function oe(){try{return f(h)}catch{return null}}function Oe(n,e,t){let r=typeof n=="function"?{next:n,error:e,complete:t}:n;return o=>o.pipe(G({next:r.next,complete:r.complete}),I(i=>(r.error(i),H)),r.finalize?L(r.finalize):i=>i)}function se(n,e){!e?.injector&&g(se);let t=e?.injector??f(h),r=new U(1),o=S(()=>{let i;try{i=n()}catch(a){l(()=>r.error(a));return}l(()=>r.next(i))},{injector:t,manualCleanup:!0});return t.get(p).onDestroy(()=>{o.destroy(),r.complete()}),r.asObservable()}var ie={login:{showInApp:!1,name:"login",method:"POST",internal:!0,appRoute:"login",url:"/api/login/"},logout:{showInApp:!1,name:"logout",method:"POST",internal:!0,appRoute:"logout",url:"/api/logout/"},dashboard:{showInApp:!1,name:"dashboard",internal:!0,appRoute:""},home:{showInApp:!0,name:"home",method:"GET",internal:!0,appRoute:"home"},aziende:{showInApp:!0,name:"aziende",method:"GET",internal:!0,appRoute:"companies",subAppRoute:"companies/:id",url:"/api/market/companies/"},prodotto:{showInApp:!1,name:"prodotto",method:"GET",internal:!1,url:"api/market/companies/:companyId/products/:productId/"}},K=n=>ie[n.toString()];var N=class n{constructor(e,t){this.http=e;this.serviceType=t,this.apiModel=K(this.serviceType)}serviceType;apiModel;getApiUrl(e,t,r){let o=`${this.apiModel.url}`;return t&&Object.keys(t).forEach(i=>{o=o.replace(`:${i}`,t[i])}),r&&(o=`${o}${r}`),e&&(o=`${o}?${e}`),o}execute(e,t=""){if(this.apiModel===void 0)return w(()=>new Error(`Api model not found for ${this.serviceType}`));if(this.apiModel.method===void 0)return w(()=>new Error(`Method not found for ${this.serviceType}`));let r=this.getApiUrl(e.params,e.urlPathParams,t);return r===void 0?w(()=>new Error(`Url not found for ${this.serviceType}`)):this.http.request(this.apiModel.method,r,{body:e.body,headers:e.headers}).pipe(D(o=>(console.log(`[BaseApiService] ${this.serviceType.toString()} response: `,o),o)),I(o=>{throw this.getErrorMessage(o)}))}executeSub(e,t){return this.execute(t,e)}getErrorMessage(e){let t="Errore:";return e?.error?t=`${t} ${e.error}`:e?.message?t=`${t} ${e.message}`:e?.statusText?t=`${t} ${e.statusText}`:t=`${t} ${e.toString()}}`,console.log(`[${this.serviceType.toString()}] ${t}`),t}static \u0275fac=function(t){return new(t||n)(x(W),x(R))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};export{ie as a,K as b,ae as c,le as d,de as e,fe as f,pe as g,N as h,ne as i,Oe as j,se as k};
