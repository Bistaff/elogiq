import './polyfills.server.mjs';
import{C as I,I as W,Oc as K,Q as B,U as M,Z as x,_ as f,b as P,ea as g,ec as l,fc as O,g as $,gc as S,i as U,j as H,ka as h,la as p,m as w,n as q,q as D,ta as v,ua as E}from"./chunk-NPAU7FDY.mjs";import{a as s,b}from"./chunk-X2SEQXRR.mjs";var R=(c=>(c.LOGIN="login",c.DASHBOARD="dashboard",c.HOME="home",c.COMPANIES="companies",c.COMPANY="company",c.PRODUCTS="products",c.PRODUCT="product",c))(R||{});function L(t){let e=l(()=>t());return _(e)?new Proxy(t,{get(n,r){return r in e?(v(n[r])||Object.defineProperty(n,r,{value:O(()=>n()[r]),configurable:!0}),L(n[r])):n[r]}}):t}var Y=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function _(t){if(t===null||typeof t!="object"||J(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(Y.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function J(t){return typeof t?.[Symbol.iterator]=="function"}var Q=new WeakMap,u=Symbol("STATE_SOURCE");function ae(t,...e){t[u].update(n=>e.reduce((r,o)=>s(s({},r),typeof o=="function"?o(r):o),n)),ee(t)}function X(t){return t[u]()}function Z(t){return Q.get(t[u])||[]}function ee(t){let e=Z(t);for(let n of e){let r=l(()=>X(t));n(r)}}function le(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),r=e;return(()=>{class i{constructor(){let c=r.reduce((j,F)=>F(j),te()),{stateSignals:d,props:y,methods:m,hooks:A}=c,k=s(s(s({},d),y),m);this[u]=c[u];for(let j of Reflect.ownKeys(k))this[j]=k[j];let{onInit:T,onDestroy:C}=A;T&&T(),C&&f(p).onDestroy(C)}static \u0275fac=function(d){return new(d||i)};static \u0275prov=M({token:i,factory:i.\u0275fac,providedIn:n.providedIn||null})}return i})()}function te(){return{[u]:E({}),stateSignals:{},props:{},methods:{},hooks:{}}}function de(t){return e=>{let n=t(s(s(s({[u]:e[u]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),b(s({},e),{props:s(s({},e.props),n)})}}function fe(t){return e=>{let n=t(s(s(s({[u]:e[u]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(n),b(s({},e),{methods:s(s({},e.methods),n)})}}function pe(t){return e=>{let n=typeof t=="function"?t():t,r=Reflect.ownKeys(n);e[u].update(i=>s(s({},i),n));let o=r.reduce((i,a)=>{let c=O(()=>e[u]()[a]);return b(s({},i),{[a]:L(c)})},{});return b(s({},e),{stateSignals:s(s({},e.stateSignals),o)})}}function ne(t,e){e?.injector||g(ne);let n=e?.injector??f(h),r=new $,o=t(r).subscribe();n.get(p).onDestroy(()=>o.unsubscribe());let i=(a,c)=>{if(re(a))return r.next(a),{destroy:P};let d=c?.injector??oe()??n;if(v(a)){let m=S(()=>{let A=a();l(()=>r.next(A))},{injector:d});return o.add({unsubscribe:()=>m.destroy()}),m}let y=a.subscribe(m=>r.next(m));return o.add(y),d!==n&&d.get(p).onDestroy(()=>y.unsubscribe()),{destroy:()=>y.unsubscribe()}};return i.destroy=o.unsubscribe.bind(o),i}function re(t){return!v(t)&&!q(t)}function oe(){try{return f(h)}catch{return null}}function Me(t,e,n){let r=typeof t=="function"?{next:t,error:e,complete:n}:t;return o=>o.pipe(B({next:r.next,complete:r.complete}),I(i=>(r.error(i),H)),r.finalize?W(r.finalize):i=>i)}function se(t,e){!e?.injector&&g(se);let n=e?.injector??f(h),r=new U(1),o=S(()=>{let i;try{i=t()}catch(a){l(()=>r.error(a));return}l(()=>r.next(i))},{injector:n,manualCleanup:!0});return n.get(p).onDestroy(()=>{o.destroy(),r.complete()}),r.asObservable()}var ie={login:{showInApp:!1,name:"login",method:"POST",internal:!0,appRoute:"login",url:"/api/login/"},dashboard:{showInApp:!1,name:"dashboard",internal:!0,appRoute:""},home:{showInApp:!0,name:"home",method:"GET",internal:!0,appRoute:"home"},companies:{showInApp:!0,name:"companies",method:"GET",internal:!0,appRoute:"companies",subAppRoute:"companies/:id",url:"/api/market/companies/"},product:{showInApp:!1,name:"product",method:"GET",internal:!1,url:"api/market/companies/:companyId/products/:productId/"}},N=t=>ie[t.toString()];var G=class t{constructor(e,n){this.http=e;this.serviceType=n,this.apiModel=N(this.serviceType)}serviceType;apiModel;getApiUrl(e,n,r){let o=`${this.apiModel.url}`;return n&&Object.keys(n).forEach(i=>{o=o.replace(`:${i}`,n[i])}),r&&(o=`${o}${r}`),e&&(o=`${o}?${e}`),o}execute(e,n=""){if(this.apiModel===void 0)return w(()=>new Error(`Api model not found for ${this.serviceType}`));if(this.apiModel.method===void 0)return w(()=>new Error(`Method not found for ${this.serviceType}`));let r=this.getApiUrl(e.params,e.urlPathParams,n);return r===void 0?w(()=>new Error(`Url not found for ${this.serviceType}`)):this.http.request(this.apiModel.method,r,{body:e.body,headers:e.headers}).pipe(D(o=>(console.log(`[BaseApiService] ${this.serviceType.toString()} response: `,o),o)),I(o=>{throw this.getErrorMessage(o)}))}executeSub(e,n){return this.execute(n,e)}getErrorMessage(e){let n=`[${this.serviceType.toString()}] There was an error: `;return e?.error?`${n} ${e.error}`:e?.message?`${n} ${e.message}`:e?.statusText?`${n} ${e.statusText}`:`${n} error.toString()}`}static \u0275fac=function(n){return new(n||t)(x(K),x(R))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};export{ae as a,le as b,de as c,fe as d,pe as e,ie as f,N as g,G as h,ne as i,Me as j,se as k};
