import{a as De,b as Re,c as we}from"./chunk-43FBYMQS.js";import{a as z,b as C,c as M,d as Se,e as _e,f as xe,g as Le,h as Ae,i as Me,j as Pe,k as Ie}from"./chunk-PR47VFPV.js";import{a as de,b as be,c as Ce,d as he,e as I,f as S,g as D,h as ve,i as ye,j as _}from"./chunk-PTTOV3AC.js";import{$ as ee,Ab as H,B as q,Bb as U,Cb as $,Db as P,E as J,Fb as ae,Gb as V,Ha as m,Ib as g,Jb as b,Nb as pe,Q as K,S as X,Sa as f,Vb as W,W as Y,Wa as oe,aa as l,bb as c,eb as re,f as Q,fb as ne,fc as me,gb as x,ha as N,hb as L,ia as j,ib as i,jb as n,jc as se,kb as s,kc as le,lc as ce,mb as B,nc as y,ob as v,pb as d,s as Z,tc as ue,uc as fe,va as te,vc as ge,wb as u,xb as ie,yb as A}from"./chunk-FEXQBV3E.js";var R=class t extends Ae{constructor(e){super(e,"login");this.http=e}login(e){return this.execute({body:e}).pipe(Z(o=>o),J(o=>{throw o}))}static \u0275fac=function(o){return new(o||t)(ee(ue))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ne={user:{},error:"",logged:!1,isLoading:!1,currentPage:"dashboard"},h=Se({providedIn:"root"},Le(Ne),xe((t,r=l(R))=>({loginUser:Me(Q(X(()=>M(t,{isLoading:!0})),K(e=>r.login(e).pipe(Pe({next:o=>M(t,{logged:!0,isLoading:!1}),error:o=>{M(t,{isLoading:!1,error:o.message}),console.error("Error during login: ",o.message)}}))))),changeCurrentPage:e=>{M(t,{currentPage:e})}})),_e(({isLoading:t})=>({isLoading$:Ie(t)})));var Fe=(t,r)=>({"border-primary":t,"border-transparent":r}),Ee=(t,r)=>r.appRoute;function je(t,r){if(t&1){let e=B();i(0,"li",13),v("click",function(){let p=N(e).$implicit,a=d();return j(a.changeCurrentPage(p.name))}),u(1),g(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=d();c("routerLink",e.appRoute)("ngClass",V(5,Fe,o.currentPage===e.name,o.currentPage!=e.name)),m(),A(" ",b(2,3,e.name)," ")}}function Be(t,r){if(t&1){let e=B();i(0,"li",14),v("click",function(){let p=N(e).$implicit,a=d();return j(a.changeCurrentPage(p.name))}),u(1),g(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=d();c("routerLink",e.appRoute)("ngClass",V(5,Fe,o.currentPage===e.name,o.currentPage!=e.name)),m(),A(" ",b(2,3,e.name)," ")}}var k=class t{store=l(h);router=l(S);menuItems=[];currentPage="dashboard";constructor(){let r=this.router.url.split("/")[1];this.menuItems=Object.keys(z).map(e=>{let o=z[e];return this.currentPage=r.includes(e)?e:this.currentPage,o}).filter(e=>e.showInApp)}changeCurrentPage(r){r&&(this.currentPage=r,this.store.changeCurrentPage(r))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-sidebar"]],decls:16,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","d-lg-none"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","assets/logo.png","alt","Logo","width","40"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarScroll","aria-controls","navbarScroll","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarScroll",1,"collapse","navbar-collapse"],["role","button",1,"navbar-nav","me-auto","my-2","my-lg-0","navbar-nav-scroll",2,"--bs-scroll-height","100px"],[1,"nav-item","py-2",3,"routerLink","ngClass"],[1,"h-100","py-2","d-none","d-lg-block"],[1,"d-flex","justify-content-center","mb-3"],[1,"list-group","list-group-flush","border-0","d-block-sm"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"routerLink","ngClass"],[1,"nav-item","py-2",3,"click","routerLink","ngClass"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"click","routerLink","ngClass"]],template:function(e,o){e&1&&(i(0,"nav",0)(1,"div",1)(2,"a",2),s(3,"img",3),n(),i(4,"button",4),s(5,"span",5),n(),i(6,"div",6)(7,"ul",7),x(8,je,3,8,"li",8,Ee),n()()()(),i(10,"div",9)(11,"div",10),s(12,"img",3),n(),i(13,"div",11),x(14,Be,3,8,"li",12,Ee),n()()),e&2&&(m(8),L(o.menuItems),m(6),L(o.menuItems))},dependencies:[y,me,ce,D,_],encapsulation:2})};var He=t=>[t];function Ue(t,r){if(t&1&&(i(0,"a",8),u(1),g(2,"titlecase"),n(),i(3,"span",9),u(4,">"),n()),t&2){let e=d().$implicit;c("routerLink",ae(4,He,e.route)),m(),A(" ",b(2,2,e.text)," ")}}function $e(t,r){if(t&1&&(i(0,"span"),u(1),n()),t&2){let e=d().$implicit;m(),ie(e.text)}}function Ve(t,r){if(t&1&&oe(0,Ue,5,6)(1,$e,2,1,"span"),t&2){let e=r.$index,o=r.$count,p=d();re(p.pages.length>1&&e!==o-1?0:1)}}var F=class t{router=l(S);pages=[];constructor(){this.router.events.pipe(q(r=>r instanceof he)).subscribe(r=>{let e="",o=[{text:"Home",route:"home"}];if(r.url==="/home"){this.pages=o;return}r.url.split("/").filter(p=>p!=="").forEach(p=>{o=[...o,{text:p,route:e+p+"/"}]}),this.pages=o})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-dashboard"]],decls:17,vars:0,consts:[[1,"main-grid","d-block","d-lg-grid"],[1,"header","border-bottom","bg-primary","text-white","d-none","d-lg-flex","justify-content-between","align-items-center","px-5"],[1,"fs-4"],["src","assets/company-profile-image.png","alt","Logo","width","45",1,"logo"],[1,"sidebar","border-end","d-block"],[1,"sidebar","border-end","d-none","d-lg-block"],[1,"content","p-5","position-relative"],[1,"d-none","d-lg-flex","align-items-center","px-5",2,"position","absolute","top","10px","left","0"],[1,"link-offset-2","link-offset-2-hover","link-underline","link-underline-opacity-0","link-underline-opacity-75-hover","me-1",3,"routerLink"],[1,"me-1","text-primary"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),u(4,"ElOgiQ. "),n(),i(5,"span"),u(6,"La logistica semplice"),n()(),s(7,"img",3),n(),i(8,"div",4),s(9,"app-sidebar"),n(),i(10,"div",5),s(11,"app-sidebar"),n(),i(12,"div",6)(13,"div",7),x(14,Ve,2,1,null,null,ne),n(),s(16,"router-outlet"),n()()),e&2&&(m(14),L(o.pages))},dependencies:[y,le,I,k,D,_],encapsulation:2,changeDetection:0})};var O=class t{store=l(h);router=l(S);loginFormControls=[];error=te("");isLoading;constructor(){this.isLoading=this.store.isLoading$,this.loginFormControls=Re["login".toString()],W(()=>{this.error.set(this.store.error())}),W(()=>{this.store.logged()&&this.router.navigate(["/home"])})}onSubmit(r){this.store.loginUser(r)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-login"]],features:[P([h])],decls:8,vars:12,consts:[[1,"d-flex","d-lg-none","h-100","justify-content-center","align-items-center","p-3"],[1,"p-5","d-flex","flex-column","bg-primary"],[3,"formSubmittedOutput","errorChange","controls","error","isLoading","horizontal"],[1,"d-none","d-lg-flex","h-100","justify-content-center","align-items-center"],[1,"w-50","p-5","d-flex","flex-column","bg-primary"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"app-form",2),g(3,"async"),v("formSubmittedOutput",function(a){return o.onSubmit(a)}),$("errorChange",function(a){return U(o.error,a)||(o.error=a),a}),n()()(),i(4,"div",3)(5,"div",4)(6,"app-form",2),g(7,"async"),v("formSubmittedOutput",function(a){return o.onSubmit(a)}),$("errorChange",function(a){return U(o.error,a)||(o.error=a),a}),n()()()),e&2&&(m(2),c("controls",o.loginFormControls),H("error",o.error),c("isLoading",b(3,8,o.isLoading))("horizontal",!1),m(4),c("controls",o.loginFormControls),H("error",o.error),c("isLoading",b(7,10,o.isLoading))("horizontal",!1))},dependencies:[De,y,se,we,_],encapsulation:2,changeDetection:0})};var Oe=[{path:C("dashboard").appRoute,component:F,children:[{path:"",pathMatch:"full",redirectTo:C("home").appRoute},{path:C("home").appRoute,loadComponent:()=>import("./chunk-FSDSGX3E.js").then(t=>t.HomeComponent)},{path:C("companies").appRoute,loadComponent:()=>import("./chunk-7GAIPJBO.js").then(t=>t.CompaniesComponent)},{path:C("companies").subAppRoute,loadComponent:()=>import("./chunk-5XYGFF2P.js").then(t=>t.CompanyComponent)}]},{path:C("login").appRoute,component:O},{path:"**",loadComponent:()=>import("./chunk-7X53EETW.js").then(t=>t.NotFoundComponent)},{path:"**",redirectTo:"/not-found",pathMatch:"full"}];var Te={providers:[pe({eventCoalescing:!0}),ve(Oe,ye()),Ce(be()),fe(ge())]};var T=class t{title="frontend";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],features:[P([h])],decls:1,vars:0,template:function(e,o){e&1&&s(0,"router-outlet")},dependencies:[I],encapsulation:2,changeDetection:0})};de(T,Te).catch(t=>console.error(t));
