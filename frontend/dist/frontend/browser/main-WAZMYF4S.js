import{a as we,b as Me,c as Re}from"./chunk-I4ED3FAU.js";import{a as te,b as v,c as C,d as Ie,e as Ae,f as ke,g as Ee,h as j,i as oe,j as re,k as Pe}from"./chunk-HLIK3QBQ.js";import{a as he,b as ye,c as Se,d as _e,e as F,f as _,g as T,h as xe,i as Le,j as x}from"./chunk-73W4XPEU.js";import{Ab as J,Bb as K,C as ie,Cb as X,Db as D,F as w,Fb as ce,Gb as Y,Ia as m,Ib as b,Jb as h,Nb as de,R as W,T as G,Ta as f,Vb as ee,X as M,Xa as pe,aa as R,ba as c,cb as l,f as V,fb as me,fc as ue,gb as se,hb as L,ia as Q,ib as I,ja as Z,jb as i,jc as fe,kb as n,kc as ge,lb as s,lc as be,nb as q,nc as S,pb as g,qb as u,t as P,tc as O,uc as Ce,vc as ve,wa as ae,xb as d,yb as le,zb as A}from"./chunk-HU6A24MR.js";var N=class t extends j{constructor(e){super(e,"login");this.http=e}login(e){return this.execute({body:e}).pipe(P(o=>o),w(o=>{throw o}))}static \u0275fac=function(o){return new(o||t)(R(O))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};var B=class t extends j{constructor(e){super(e,"logout");this.http=e}logout(){return this.execute({}).pipe(P(e=>e),w(e=>{throw e}))}static \u0275fac=function(o){return new(o||t)(R(O))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})};var De={user:{},error:"",logged:!1,isLoading:!1,currentPage:"dashboard"},y=Ie({providedIn:"root"},Ee(De),ke((t,r=c(N),e=c(B))=>({loginUser:oe(V(G(()=>C(t,{isLoading:!0})),W(o=>r.login(o).pipe(re({next:a=>C(t,{logged:!0,isLoading:!1}),error:a=>{console.error("Error during login: ",a),C(t,{isLoading:!1,error:a})}}))))),logoutUser:oe(V(G(()=>C(t,{isLoading:!0})),W(()=>e.logout().pipe(re({next:o=>C(t,De),error:o=>{console.error("Error during logout: ",o),C(t,{isLoading:!1,error:o})}}))))),changeCurrentPage:o=>{C(t,{currentPage:o})}})),Ae(({isLoading:t})=>({isLoading$:Pe(t)})));var Te=(t,r)=>({"border-primary":t,"border-transparent":r}),Oe=(t,r)=>r.appRoute;function He(t,r){if(t&1){let e=q();i(0,"li",16),g("click",function(){let a=Q(e).$implicit,p=u();return Z(p.changeCurrentPage(a.name))}),d(1),b(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=u();l("routerLink",e.appRoute)("ngClass",Y(5,Te,o.currentPage===e.name,o.currentPage!=e.name)),m(),A(" ",h(2,3,e.name)," ")}}function Ue(t,r){if(t&1){let e=q();i(0,"li",17),g("click",function(){let a=Q(e).$implicit,p=u();return Z(p.changeCurrentPage(a.name))}),d(1),b(2,"uppercase"),n()}if(t&2){let e=r.$implicit,o=u();l("routerLink",e.appRoute)("ngClass",Y(5,Te,o.currentPage===e.name,o.currentPage!=e.name)),m(),A(" ",h(2,3,e.name)," ")}}var H=class t{store=c(y);router=c(_);menuItems=[];currentPage="dashboard";constructor(){let r=this.router.url.split("/")[1];this.menuItems=Object.keys(te).map(e=>{let o=te[e];return this.currentPage=r.includes(e)?e:this.currentPage,o}).filter(e=>e.showInApp)}changeCurrentPage(r){r&&(this.currentPage=r,this.store.changeCurrentPage(r))}logout(){this.store.logoutUser({})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-sidebar"]],decls:21,vars:2,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","d-lg-none"],[1,"container-fluid"],[1,"navbar-brand"],["src","assets/logo.png","alt","Logo","width","40"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarScroll","aria-controls","navbarScroll","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarScroll",1,"collapse","navbar-collapse"],["role","button",1,"navbar-nav","me-auto","my-2","my-lg-0","navbar-nav",2,"--bs-scroll-height","100px"],[1,"nav-item","py-2",3,"routerLink","ngClass"],[1,"nav-item","py-2","text-danger","mt-3",3,"click","routerLink"],[1,"h-100","py-2","d-none","d-lg-flex","flex-column","pb-5"],[1,"d-flex","justify-content-center","mb-3"],[1,"list-group","list-group-flush","border-0","d-block-sm"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"routerLink","ngClass"],[1,"d-flex","justify-content-center","mt-auto"],["type","button",1,"btn","btn-outline-danger",3,"click","routerLink"],[1,"nav-item","py-2",3,"click","routerLink","ngClass"],["role","button",1,"list-group-item","border-0","border-end","border-size-5",3,"click","routerLink","ngClass"]],template:function(e,o){e&1&&(i(0,"nav",0)(1,"div",1)(2,"span",2),s(3,"img",3),n(),i(4,"button",4),s(5,"span",5),n(),i(6,"div",6)(7,"ul",7),L(8,He,3,8,"li",8,Oe),i(10,"li",9),g("click",function(){return o.logout()}),d(11," ESCI "),n()()()()(),i(12,"div",10)(13,"div",11),s(14,"img",3),n(),i(15,"div",12),L(16,Ue,3,8,"li",13,Oe),n(),i(18,"div",14)(19,"button",15),g("click",function(){return o.logout()}),d(20,"ESCI"),n()()()),e&2&&(m(8),I(o.menuItems),m(2),l("routerLink","login"),m(6),I(o.menuItems),m(3),l("routerLink","login"))},dependencies:[S,ue,be,T,x],encapsulation:2})};var $e=t=>[t];function ze(t,r){if(t&1&&(i(0,"a",8),d(1),b(2,"titlecase"),n(),i(3,"span",9),d(4,">"),n()),t&2){let e=u().$implicit;l("routerLink",ce(4,$e,e.route)),m(),A(" ",h(2,2,e.text)," ")}}function Ve(t,r){if(t&1&&(i(0,"span"),d(1),n()),t&2){let e=u().$implicit;m(),le(e.text)}}function We(t,r){if(t&1&&pe(0,ze,5,6)(1,Ve,2,1,"span"),t&2){let e=r.$index,o=r.$count,a=u();me(a.pages.length>1&&e!==o-1?0:1)}}var U=class t{router=c(_);pages=[];constructor(){this.router.events.pipe(ie(r=>r instanceof _e)).subscribe(r=>{let e="",o=[{text:"Home",route:"home"}];if(r.url==="/home"){this.pages=o;return}r.url.split("/").filter(a=>a!=="").forEach(a=>{o=[...o,{text:this.translateRoutes(a),route:e+a+"/"}]}),this.pages=o})}translateRoutes(r){switch(r){case"home":return"Home";case"companies":return"Aziende";default:return r}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-dashboard"]],decls:17,vars:0,consts:[[1,"main-grid","d-block","d-lg-grid"],[1,"header","border-bottom","bg-primary","text-white","d-none","d-lg-flex","justify-content-between","align-items-center","px-5"],[1,"fs-4"],["src","assets/company-profile-image.png","alt","Logo","width","45",1,"logo"],[1,"sidebar","border-end","d-block"],[1,"sidebar","border-end","d-none","d-lg-block"],[1,"content","p-5","position-relative"],[1,"d-none","d-lg-flex","align-items-center","px-5",2,"position","absolute","top","10px","left","0"],[1,"link-offset-2","link-offset-2-hover","link-underline","link-underline-opacity-0","link-underline-opacity-75-hover","me-1",3,"routerLink"],[1,"me-1","text-primary"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),d(4,"ElOgiQ. "),n(),i(5,"span"),d(6,"La logistica semplice"),n()(),s(7,"img",3),n(),i(8,"div",4),s(9,"app-sidebar"),n(),i(10,"div",5),s(11,"app-sidebar"),n(),i(12,"div",6)(13,"div",7),L(14,We,2,1,null,null,se),n(),s(16,"router-outlet"),n()()),e&2&&(m(14),I(o.pages))},dependencies:[S,ge,F,H,T,x],encapsulation:2,changeDetection:0})};var $=class t{store=c(y);router=c(_);loginFormControls=[];error=ae("");isLoading;constructor(){this.isLoading=this.store.isLoading$,this.loginFormControls=Me["login".toString()],ee(()=>{this.error.set(this.store.error())}),ee(()=>{this.store.logged()&&this.router.navigate(["/home"])})}onSubmit(r){this.store.loginUser(r)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-login"]],features:[D([y])],decls:12,vars:14,consts:[[1,"d-flex","d-lg-none","h-100","justify-content-center","align-items-center","p-3","bg-primary","position-relative"],[1,"d-flex","p-3","pt-5","position-absolute","top-0","start-50","translate-middle-x"],["src","assets/logo-white.png","width","100"],[1,"p-5","d-flex","flex-column","rounded","shadow","bg-body"],[3,"formSubmittedOutput","errorChange","controls","error","isLoading","horizontal","light"],[1,"d-none","d-lg-flex","h-100","justify-content-center","align-items-center","bg-primary","position-relative"],[1,"w-50","p-5","d-flex","flex-column","rounded","shadow","bg-body"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1),s(2,"img",2),n(),i(3,"div",3)(4,"app-form",4),b(5,"async"),g("formSubmittedOutput",function(p){return o.onSubmit(p)}),X("errorChange",function(p){return K(o.error,p)||(o.error=p),p}),n()()(),i(6,"div",5)(7,"div",1),s(8,"img",2),n(),i(9,"div",6)(10,"app-form",4),b(11,"async"),g("formSubmittedOutput",function(p){return o.onSubmit(p)}),X("errorChange",function(p){return K(o.error,p)||(o.error=p),p}),n()()()),e&2&&(m(4),l("controls",o.loginFormControls),J("error",o.error),l("isLoading",h(5,10,o.isLoading))("horizontal",!1)("light",!1),m(6),l("controls",o.loginFormControls),J("error",o.error),l("isLoading",h(11,12,o.isLoading))("horizontal",!1)("light",!1))},dependencies:[we,S,fe,Re,x],encapsulation:2,changeDetection:0})};var je=[{path:v("dashboard").appRoute,component:U,children:[{path:"",pathMatch:"full",redirectTo:v("home").appRoute},{path:v("home").appRoute,loadComponent:()=>import("./chunk-2OBHPPBU.js").then(t=>t.HomeComponent)},{path:v("aziende").appRoute,loadComponent:()=>import("./chunk-JWOZX7YP.js").then(t=>t.CompaniesComponent)},{path:v("aziende").subAppRoute,loadComponent:()=>import("./chunk-55KHLHOJ.js").then(t=>t.CompanyComponent)}]},{path:v("login").appRoute,component:$},{path:"**",loadComponent:()=>import("./chunk-GDVIMQNM.js").then(t=>t.NotFoundComponent)},{path:"**",redirectTo:"/not-found",pathMatch:"full"}];var Ne={providers:[de({eventCoalescing:!0}),xe(je,Le()),Se(ye()),Ce(ve())]};var z=class t{title="frontend";static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],features:[D([y])],decls:1,vars:0,template:function(e,o){e&1&&s(0,"router-outlet")},dependencies:[F],encapsulation:2,changeDetection:0})};he(z,Ne).catch(t=>console.error(t));
